[gd_scene load_steps=16 format=3 uid="uid://28paxk21m0io"]

[ext_resource type="Script" path="res://Scenes/Tower/BeamTower/beamTower.gd" id="1_8exyt"]
[ext_resource type="Script" path="res://Scenes/Components/towerBase.gd" id="2_5lptc"]
[ext_resource type="Texture2D" uid="uid://rl62hshmfphl" path="res://Assets/Sprites/PNG/TIle/BlackTile.png" id="2_537no"]
[ext_resource type="Script" path="res://Scenes/Components/gunPivot.gd" id="3_7qucq"]
[ext_resource type="Script" path="res://Scenes/Components/projectileSpawner.gd" id="4_ncd52"]
[ext_resource type="Texture2D" uid="uid://dd8wbfhwxqq6x" path="res://Assets/Sprites/PNG/Buildable Tower/beamTower_tier1.png" id="6_autxw"]
[ext_resource type="Resource" uid="uid://dk141qnr1mlnd" path="res://Scenes/Projectiles/BeamTowerProjectile/beamTowerProjectile.tres" id="6_r84i7"]
[ext_resource type="Script" path="res://Scenes/Components/attackRange.gd" id="7_3xnkq"]
[ext_resource type="Script" path="res://Scenes/Projectiles/autoSprite.gd" id="8_u38lm"]
[ext_resource type="Texture2D" uid="uid://brkxvuwlwadfp" path="res://Assets/Sprites/PNG/Buildable Tower/beamTower_tier2.png" id="9_vbj36"]
[ext_resource type="Texture2D" uid="uid://8vf6sog8gu3v" path="res://Assets/Sprites/PNG/Buildable Tower/beamTower_tier3.png" id="10_03oge"]
[ext_resource type="Script" path="res://Scenes/Components/healthManager.gd" id="12_jwv24"]
[ext_resource type="Script" path="res://Scenes/Components/hurtbox.gd" id="13_svu8n"]

[sub_resource type="AtlasTexture" id="AtlasTexture_rinhm"]
atlas = ExtResource("2_537no")
region = Rect2(0, 0, 18, 18)

[sub_resource type="CircleShape2D" id="CircleShape2D_4h40k"]
radius = 50.0

[node name="BeamTower" type="StaticBody2D" node_paths=PackedStringArray("projectileSpawner", "attackRange", "gunPivot", "healthManager")]
collision_layer = 256
collision_mask = 256
input_pickable = true
script = ExtResource("1_8exyt")
projectileSpawner = NodePath("GunPivot/ProjectileSpawner")
attackRange = NodePath("AttackRange")
gunPivot = NodePath("GunPivot")
attackSpeed = 8.0
healthManager = NodePath("HealthManager")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = SubResource("AtlasTexture_rinhm")

[node name="BeamCollider" type="CollisionPolygon2D" parent="."]
position = Vector2(0, 1)
polygon = PackedVector2Array(-6, -6, -6, 4, 6, 4, 6, -6)

[node name="TowerBase" type="Area2D" parent="."]
collision_layer = 64
collision_mask = 64
script = ExtResource("2_5lptc")

[node name="TowerShape" type="CollisionPolygon2D" parent="TowerBase"]
position = Vector2(0, -1)
polygon = PackedVector2Array(-6, -4, -6, 6, 6, 6, 6, -4)

[node name="GunPivot" type="Node2D" parent="." node_paths=PackedStringArray("inRange")]
script = ExtResource("3_7qucq")
inRange = NodePath("../AttackRange")
rotationSpeed = 0.7

[node name="ProjectileSpawner" type="Node2D" parent="GunPivot" node_paths=PackedStringArray("gunPivot")]
position = Vector2(0, -13)
script = ExtResource("4_ncd52")
gunPivot = NodePath("..")
projectilePacker = ExtResource("6_r84i7")

[node name="BeamSprite" type="Sprite2D" parent="GunPivot"]
position = Vector2(0, -5)
texture = ExtResource("6_autxw")
script = ExtResource("8_u38lm")
tier1 = ExtResource("6_autxw")
tier2 = ExtResource("9_vbj36")
tier3 = ExtResource("10_03oge")

[node name="AttackRange" type="Area2D" parent="." node_paths=PackedStringArray("tower", "range")]
collision_layer = 32
collision_mask = 4096
script = ExtResource("7_3xnkq")
tower = NodePath("..")
attackRange = 45
range = NodePath("AttackRangeShape")

[node name="AttackRangeShape" type="CollisionShape2D" parent="AttackRange"]
position = Vector2(0, -1)
shape = SubResource("CircleShape2D_4h40k")

[node name="HealthManager" type="Node" parent="."]
script = ExtResource("12_jwv24")
maxHealth = 100.0

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 1024
collision_mask = 0
script = ExtResource("13_svu8n")

[node name="HurtboxShape" type="CollisionPolygon2D" parent="Hurtbox"]
position = Vector2(0, -1)
polygon = PackedVector2Array(-6, -4, -6, 6, 6, 6, 6, -4)

[connection signal="towerUpgraded" from="." to="GunPivot/BeamSprite" method="_onTowerUpgraded"]
